{"remainingRequest":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Med/Desktop/Perso/WEB/vue-interface/src/components/Passeport/PersonalAccessTokens.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/src/components/Passeport/PersonalAccessTokens.vue","mtime":1584056465224},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/cache-loader/dist/cjs.js","mtime":1583024834205},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/babel-loader/lib/index.js","mtime":1583024830408},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/cache-loader/dist/cjs.js","mtime":1583024834205},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCgpleHBvcnQgZGVmYXVsdCB7CiAgICAvKgogICAgICogVGhlIGNvbXBvbmVudCdzIGRhdGEuCiAgICAgKi8KICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYWNjZXNzVG9rZW46IG51bGwsCgogICAgICAgICAgICB0b2tlbnM6IFtdLAogICAgICAgICAgICBzY29wZXM6IFtdLAoKICAgICAgICAgICAgZm9ybTogewogICAgICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgICAgICBzY29wZXM6IFtdLAogICAgICAgICAgICAgICAgZXJyb3JzOiBbXQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBQcmVwYXJlIHRoZSBjb21wb25lbnQgKFZ1ZSAxLngpLgogICAgICovCiAgICByZWFkeSgpIHsKICAgICAgICB0aGlzLnByZXBhcmVDb21wb25lbnQoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBQcmVwYXJlIHRoZSBjb21wb25lbnQgKFZ1ZSAyLngpLgogICAgICovCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMucHJlcGFyZUNvbXBvbmVudCgpOwogICAgfSwKCiAgICBtZXRob2RzOiB7CiAgICAgICAgLyoqCiAgICAgICAgICogUHJlcGFyZSB0aGUgY29tcG9uZW50LgogICAgICAgICAqLwogICAgICAgIHByZXBhcmVDb21wb25lbnQoKSB7CiAgICAgICAgICAgIHRoaXMuZ2V0VG9rZW5zKCk7CiAgICAgICAgICAgIHRoaXMuZ2V0U2NvcGVzKCk7CgogICAgICAgICAgICAkKCcjbW9kYWwtY3JlYXRlLXRva2VuJykub24oJ3Nob3duLmJzLm1vZGFsJywgKCkgPT4gewogICAgICAgICAgICAgICAgJCgnI2NyZWF0ZS10b2tlbi1uYW1lJykuZm9jdXMoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0IGFsbCBvZiB0aGUgcGVyc29uYWwgYWNjZXNzIHRva2VucyBmb3IgdGhlIHVzZXIuCiAgICAgICAgICovCiAgICAgICAgZ2V0VG9rZW5zKCkgewogICAgICAgICAgICBheGlvcy5nZXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSV9VUkwrJy9vYXV0aC9wZXJzb25hbC1hY2Nlc3MtdG9rZW5zJykKICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW5zID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiBHZXQgYWxsIG9mIHRoZSBhdmFpbGFibGUgc2NvcGVzLgogICAgICAgICAqLwogICAgICAgIGdldFNjb3BlcygpIHsKICAgICAgICAgICAgYXhpb3MuZ2V0KHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUElfVVJMKycvb2F1dGgvc2NvcGVzJykKICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NvcGVzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiBTaG93IHRoZSBmb3JtIGZvciBjcmVhdGluZyBuZXcgdG9rZW5zLgogICAgICAgICAqLwogICAgICAgIHNob3dDcmVhdGVUb2tlbkZvcm0oKSB7CiAgICAgICAgICAgICQoJyNtb2RhbC1jcmVhdGUtdG9rZW4nKS5tb2RhbCgnc2hvdycpOwogICAgICAgIH0sCgogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZSBhIG5ldyBwZXJzb25hbCBhY2Nlc3MgdG9rZW4uCiAgICAgICAgICovCiAgICAgICAgc3RvcmUoKSB7CiAgICAgICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBudWxsOwoKICAgICAgICAgICAgdGhpcy5mb3JtLmVycm9ycyA9IFtdOwoKICAgICAgICAgICAgYXhpb3MucG9zdChwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJX1VSTCsnL29hdXRoL3BlcnNvbmFsLWFjY2Vzcy10b2tlbnMnLCB0aGlzLmZvcm0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm0ubmFtZSA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm0uc2NvcGVzID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5lcnJvcnMgPSBbXTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2gocmVzcG9uc2UuZGF0YS50b2tlbik7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBY2Nlc3NUb2tlbihyZXNwb25zZS5kYXRhLmFjY2Vzc1Rva2VuKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IucmVzcG9uc2UuZGF0YSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5lcnJvcnMgPSBfLmZsYXR0ZW4oXy50b0FycmF5KGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3JzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm0uZXJyb3JzID0gWydTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi4nXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sCgogICAgICAgIC8qKgogICAgICAgICAqIFRvZ2dsZSB0aGUgZ2l2ZW4gc2NvcGUgaW4gdGhlIGxpc3Qgb2YgYXNzaWduZWQgc2NvcGVzLgogICAgICAgICAqLwogICAgICAgIHRvZ2dsZVNjb3BlKHNjb3BlKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnNjb3BlSXNBc3NpZ25lZChzY29wZSkpIHsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5zY29wZXMgPSBfLnJlamVjdCh0aGlzLmZvcm0uc2NvcGVzLCBzID0+IHMgPT0gc2NvcGUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5mb3JtLnNjb3Blcy5wdXNoKHNjb3BlKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIC8qKgogICAgICAgICAqIERldGVybWluZSBpZiB0aGUgZ2l2ZW4gc2NvcGUgaGFzIGJlZW4gYXNzaWduZWQgdG8gdGhlIHRva2VuLgogICAgICAgICAqLwogICAgICAgIHNjb3BlSXNBc3NpZ25lZChzY29wZSkgewogICAgICAgICAgICByZXR1cm4gXy5pbmRleE9mKHRoaXMuZm9ybS5zY29wZXMsIHNjb3BlKSA+PSAwOwogICAgICAgIH0sCgogICAgICAgIC8qKgogICAgICAgICAqIFNob3cgdGhlIGdpdmVuIGFjY2VzcyB0b2tlbiB0byB0aGUgdXNlci4KICAgICAgICAgKi8KICAgICAgICBzaG93QWNjZXNzVG9rZW4oYWNjZXNzVG9rZW4pIHsKICAgICAgICAgICAgJCgnI21vZGFsLWNyZWF0ZS10b2tlbicpLm1vZGFsKCdoaWRlJyk7CgogICAgICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47CgogICAgICAgICAgICAkKCcjbW9kYWwtYWNjZXNzLXRva2VuJykubW9kYWwoJ3Nob3cnKTsKICAgICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiBSZXZva2UgdGhlIGdpdmVuIHRva2VuLgogICAgICAgICAqLwogICAgICAgIHJldm9rZSh0b2tlbikgewogICAgICAgICAgICBheGlvcy5kZWxldGUocHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSV9VUkwrJy9vYXV0aC9wZXJzb25hbC1hY2Nlc3MtdG9rZW5zLycgKyB0b2tlbi5pZCkKICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VG9rZW5zKCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["PersonalAccessTokens.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8JA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PersonalAccessTokens.vue","sourceRoot":"src/components/Passeport","sourcesContent":["<style scoped>\n    .action-link {\n        cursor: pointer;\n    }\n</style>\n\n<template>\n    <div>\n        <div>\n            <div class=\"card card-default\">\n                <div class=\"card-header\">\n                    <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n                        <span>\n                            Personal Access Tokens\n                        </span>\n\n                        <a class=\"action-link\" tabindex=\"-1\" @click=\"showCreateTokenForm\">\n                            Create New Token\n                        </a>\n                    </div>\n                </div>\n\n                <div class=\"card-body\">\n                    <!-- No Tokens Notice -->\n                    <p class=\"mb-0\" v-if=\"tokens.length === 0\">\n                        You have not created any personal access tokens.\n                    </p>\n\n                    <!-- Personal Access Tokens -->\n                    <table class=\"table table-borderless mb-0\" v-if=\"tokens.length > 0\">\n                        <thead>\n                            <tr>\n                                <th>Name</th>\n                                <th></th>\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            <tr v-for=\"token in tokens\">\n                                <!-- Client Name -->\n                                <td style=\"vertical-align: middle;\">\n                                    {{ token.name }}\n                                </td>\n\n                                <!-- Delete Button -->\n                                <td style=\"vertical-align: middle;\">\n                                    <a class=\"action-link text-danger\" @click=\"revoke(token)\">\n                                        Delete\n                                    </a>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n\n        <!-- Create Token Modal -->\n        <div class=\"modal fade\" id=\"modal-create-token\" tabindex=\"-1\" role=\"dialog\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h4 class=\"modal-title\">\n                            Create Token\n                        </h4>\n\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n                    </div>\n\n                    <div class=\"modal-body\">\n                        <!-- Form Errors -->\n                        <div class=\"alert alert-danger\" v-if=\"form.errors.length > 0\">\n                            <p class=\"mb-0\"><strong>Whoops!</strong> Something went wrong!</p>\n                            <br>\n                            <ul>\n                                <li v-for=\"error in form.errors\">\n                                    {{ error }}\n                                </li>\n                            </ul>\n                        </div>\n\n                        <!-- Create Token Form -->\n                        <form role=\"form\" @submit.prevent=\"store\">\n                            <!-- Name -->\n                            <div class=\"form-group row\">\n                                <label class=\"col-md-4 col-form-label\">Name</label>\n\n                                <div class=\"col-md-6\">\n                                    <input id=\"create-token-name\" type=\"text\" class=\"form-control\" name=\"name\" v-model=\"form.name\">\n                                </div>\n                            </div>\n\n                            <!-- Scopes -->\n                            <div class=\"form-group row\" v-if=\"scopes.length > 0\">\n                                <label class=\"col-md-4 col-form-label\">Scopes</label>\n\n                                <div class=\"col-md-6\">\n                                    <div v-for=\"scope in scopes\">\n                                        <div class=\"checkbox\">\n                                            <label>\n                                                <input type=\"checkbox\"\n                                                    @click=\"toggleScope(scope.id)\"\n                                                    :checked=\"scopeIsAssigned(scope.id)\">\n\n                                                    {{ scope.id }}\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n\n                    <!-- Modal Actions -->\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n\n                        <button type=\"button\" class=\"btn btn-primary\" @click=\"store\">\n                            Create\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Access Token Modal -->\n        <div class=\"modal fade\" id=\"modal-access-token\" tabindex=\"-1\" role=\"dialog\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h4 class=\"modal-title\">\n                            Personal Access Token\n                        </h4>\n\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n                    </div>\n\n                    <div class=\"modal-body\">\n                        <p>\n                            Here is your new personal access token. This is the only time it will be shown so don't lose it!\n                            You may now use this token to make API requests.\n                        </p>\n\n                        <textarea class=\"form-control\" rows=\"10\">{{ accessToken }}</textarea>\n                    </div>\n\n                    <!-- Modal Actions -->\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\n    import axios from 'axios'\n\n    export default {\n        /*\n         * The component's data.\n         */\n        data() {\n            return {\n                accessToken: null,\n\n                tokens: [],\n                scopes: [],\n\n                form: {\n                    name: '',\n                    scopes: [],\n                    errors: []\n                }\n            };\n        },\n\n        /**\n         * Prepare the component (Vue 1.x).\n         */\n        ready() {\n            this.prepareComponent();\n        },\n\n        /**\n         * Prepare the component (Vue 2.x).\n         */\n        mounted() {\n            this.prepareComponent();\n        },\n\n        methods: {\n            /**\n             * Prepare the component.\n             */\n            prepareComponent() {\n                this.getTokens();\n                this.getScopes();\n\n                $('#modal-create-token').on('shown.bs.modal', () => {\n                    $('#create-token-name').focus();\n                });\n            },\n\n            /**\n             * Get all of the personal access tokens for the user.\n             */\n            getTokens() {\n                axios.get(process.env.VUE_APP_BASE_API_URL+'/oauth/personal-access-tokens')\n                        .then(response => {\n                            this.tokens = response.data;\n                        });\n            },\n\n            /**\n             * Get all of the available scopes.\n             */\n            getScopes() {\n                axios.get(process.env.VUE_APP_BASE_API_URL+'/oauth/scopes')\n                        .then(response => {\n                            this.scopes = response.data;\n                        });\n            },\n\n            /**\n             * Show the form for creating new tokens.\n             */\n            showCreateTokenForm() {\n                $('#modal-create-token').modal('show');\n            },\n\n            /**\n             * Create a new personal access token.\n             */\n            store() {\n                this.accessToken = null;\n\n                this.form.errors = [];\n\n                axios.post(process.env.VUE_APP_BASE_API_URL+'/oauth/personal-access-tokens', this.form)\n                        .then(response => {\n                            this.form.name = '';\n                            this.form.scopes = [];\n                            this.form.errors = [];\n\n                            this.tokens.push(response.data.token);\n\n                            this.showAccessToken(response.data.accessToken);\n                        })\n                        .catch(error => {\n                            if (typeof error.response.data === 'object') {\n                                this.form.errors = _.flatten(_.toArray(error.response.data.errors));\n                            } else {\n                                this.form.errors = ['Something went wrong. Please try again.'];\n                            }\n                        });\n            },\n\n            /**\n             * Toggle the given scope in the list of assigned scopes.\n             */\n            toggleScope(scope) {\n                if (this.scopeIsAssigned(scope)) {\n                    this.form.scopes = _.reject(this.form.scopes, s => s == scope);\n                } else {\n                    this.form.scopes.push(scope);\n                }\n            },\n\n            /**\n             * Determine if the given scope has been assigned to the token.\n             */\n            scopeIsAssigned(scope) {\n                return _.indexOf(this.form.scopes, scope) >= 0;\n            },\n\n            /**\n             * Show the given access token to the user.\n             */\n            showAccessToken(accessToken) {\n                $('#modal-create-token').modal('hide');\n\n                this.accessToken = accessToken;\n\n                $('#modal-access-token').modal('show');\n            },\n\n            /**\n             * Revoke the given token.\n             */\n            revoke(token) {\n                axios.delete(process.env.VUE_APP_BASE_API_URL+'/oauth/personal-access-tokens/' + token.id)\n                        .then(response => {\n                            this.getTokens();\n                        });\n            }\n        }\n    }\n</script>\n"]}]}