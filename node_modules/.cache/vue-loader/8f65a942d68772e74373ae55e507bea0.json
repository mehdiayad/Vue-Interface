{"remainingRequest":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Med/Desktop/Perso/WEB/vue-interface/src/components/CartIndex.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/src/components/CartIndex.vue","mtime":1584026608630},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/cache-loader/dist/cjs.js","mtime":1583024834205},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/babel-loader/lib/index.js","mtime":1583024830408},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/cache-loader/dist/cjs.js","mtime":1583024834205},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCmltcG9ydCB1c2VyU3RvcmUgZnJvbSAnLi4vc3RvcmUvdXNlclN0b3JlJwppbXBvcnQgbmF2YmFyU3RvcmUgZnJvbSAnLi4vc3RvcmUvbmF2YmFyU3RvcmUnCgpleHBvcnQgZGVmYXVsdCB7CgpkYXRhICgpIHsKCSAgICByZXR1cm4gewoJCQljYXJ0czogW10sCgkJCXVzZXJJZDogdXNlclN0b3JlLmdldHRlcnMuZ2V0VXNlcklkLAoJCQl0b3RhbENhcnRQcmljZTogMCwKCQkJYWxlcnRVcGRhdGU6ZmFsc2UsCgkJCWFsZXJ0RGVsZXRlOmZhbHNlCiAgICAgIH0KCX0sCgltb3VudGVkOmZ1bmN0aW9uKCl7CgkJLy9jb25zb2xlLmxvZygndXNlcklEID0gJyArIHRoaXMudXNlcklkKQoJCXRoaXMuZ2V0Q2FydCh0aGlzLnVzZXJJZCkKCX0sCiAgCW1ldGhvZHM6IHsKCQlkaXNwbGF5QWxlcnRVcGRhdGU6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gdGhpcy5hbGVydFVwZGF0ZQoJCX0sCgkJZGlzcGxheUFsZXJ0RGVsZXRlOiBmdW5jdGlvbigpewoJCQlyZXR1cm4gdGhpcy5hbGVydERlbGV0ZQoJCX0sCgkJZ2V0Q2FydChpZCkgewoJCQkvL2NvbnNvbGUubG9nKCdjYWxsIGdldCBjYXJ0JykKCQkJdmFyIHVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTF9DQVJUX0lOREVYX0NVU1RPTSArIGlkICAgCgkJCS8vY29uc29sZS5sb2codXJsKQoKCQlheGlvcy5nZXQodXJsKQogICAgICAgCQkudGhlbigocmVzcG9uc2UpID0+IHsKCQkJLy9jb25zb2xlLmxvZyhyZXNwb25zZSksCgkJCXRoaXMuY2FydHMgPSByZXNwb25zZS5kYXRhLAoJCQl0aGlzLmdldFRvdGFsUHJpY2VDYXJ0KCkKCQkJfSkKCgkJfSwKCQlub3RMYXN0RWxlbWVudChjYXJ0KXsKCQkJdmFyIHRlbXAgPSB0aGlzLmNhcnRzW3RoaXMuY2FydHMubGVuZ3RoLTFdCgoJCQlpZihjYXJ0ID09IHRlbXApIAoJCQkJcmV0dXJuIGZhbHNlCgkJCWVsc2UgCgkJCQlyZXR1cm4gdHJ1ZQoJCX0sCgkJdXBkYXRlQ2FydChpbmRleFRlbXApewoKCQkJdmFyIGNhcnRUZW1wID0gdGhpcy5jYXJ0c1tpbmRleFRlbXBdCgkJCXZhciBpZENhcnQgPSBjYXJ0VGVtcC5jYXJ0X2lkOwoJCQl2YXIgdXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMX0NBUlRfVVBEQVRFICsgaWRDYXJ0CgkJCWNhcnRUZW1wLmNhcnRfcHJpY2UgPSBjYXJ0VGVtcC5wcmljZSAqIGNhcnRUZW1wLnByb2R1Y3RfcXVhbnRpdHkKCgkJCWF4aW9zKHsKCQkJCW1ldGhvZDogJ3B1dCcsCgkJCQl1cmwgOiB1cmwsCgkJCQlkYXRhIDogewoJCQkJCQkvLyB2YXJpYWJsZSBlbGVtZW50cwoJCQkJCQl1c2VyX2lkOiB1c2VyU3RvcmUuZ2V0dGVycy5nZXRVc2VySWQsIAoJCQkJCQlwcm9kdWN0X2lkIDogY2FydFRlbXAucHJvZHVjdF9pZCwKCQkJCQkJcHJvZHVjdF9xdWFudGl0eSA6IGNhcnRUZW1wLnByb2R1Y3RfcXVhbnRpdHksCgkJCQkJCXByb2R1Y3RfcHJpY2U6IGNhcnRUZW1wLnByaWNlCgkJCQkJCX0KCQkJfSkKICAgICAgIAkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCS8vY29uc29sZS5sb2cocmVzcG9uc2UpCgkJCXRoaXMuZ2V0VG90YWxQcmljZUNhcnQoKQoJCQl0aGlzLmdldENhcnROdW1iZXIoKQoJCQl0aGlzLmFsZXJ0VXBkYXRlID0gdHJ1ZQoJCQl0aGlzLmFsZXJ0RGVsZXRlID0gZmFsc2UKCQkJfSk7CgoJCX0sCgkJZGVsZXRlQ2FydChpbmRleFRlbXApewoKCQkJLy8gVmFyaWFibGVzCgkJCXZhciBjYXJ0VGVtcCA9IHRoaXMuY2FydHNbaW5kZXhUZW1wXQoJCQl2YXIgaWRDYXJ0ID0gY2FydFRlbXAuY2FydF9pZDsKCQkJdmFyIHVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTF9DQVJUX0RFTEVURSArIGlkQ2FydAoKCQkJYXhpb3MoewoJCQkJbWV0aG9kOiAnZGVsZXRlJywKCQkJCXVybCA6IHVybCwKCQkJfSkKICAgICAgIAkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQkvL2NvbnNvbGUubG9nKHJlc3BvbnNlKQoJCQkJdGhpcy5jYXJ0cy5zcGxpY2UoaW5kZXhUZW1wLCAxKQoJCQkJdGhpcy5nZXRUb3RhbFByaWNlQ2FydCgpCgkJCQl0aGlzLmdldENhcnROdW1iZXIoKQoJCQkJdGhpcy5hbGVydERlbGV0ZSA9IHRydWUKCQkJCXRoaXMuYWxlcnRVcGRhdGUgPSBmYWxzZQoJCQl9KTsKCQl9LAoJCWdldFRvdGFsUHJpY2VDYXJ0KCl7CgoJCQl0aGlzLnRvdGFsQ2FydFByaWNlID0gMAoJCQlmb3IodmFyIGkgPSAwOyBpPHRoaXMuY2FydHMubGVuZ3RoOyBpKyspCgkJCXsKCQkJCXRoaXMudG90YWxDYXJ0UHJpY2UgKz0gdGhpcy5jYXJ0c1tpXS5jYXJ0X3ByaWNlCgkJCX0KCQl9LAoJCWdldENhcnROdW1iZXIoKXsKCQkJCgkJCXZhciBjYXJ0TnVtYmVyPTA7CgkJCWZvcih2YXIgaSA9IDA7IGk8dGhpcy5jYXJ0cy5sZW5ndGg7IGkrKykKCQkJewoJCQkJY2FydE51bWJlciArPSB0aGlzLmNhcnRzW2ldLnByb2R1Y3RfcXVhbnRpdHkKCQkJfQoJCQluYXZiYXJTdG9yZS5jb21taXQoJ3NldENhcnROdW1iZXInLCBjYXJ0TnVtYmVyKQoJCX0KCX0KfQo="},{"version":3,"sources":["CartIndex.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CartIndex.vue","sourceRoot":"src/components","sourcesContent":["<template>\n \n\t<div class=\"container-fluid pt-3\">\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-9 col-sm-9\">\n\t\t\t\t<div class=\"container-fluid\">\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<transition name=\"fade\">\n\t\t\t\t\t\t\t<div class=\"col-12 col-sm-12 text-center\" v-show=\"displayAlertUpdate()\">\n\t\t\t\t\t\t\t\t<div class=\"col-6 col-sm-6 mx-auto border rounded py-2 my-2 text-white\" style=\"background-color:#39CCCC;\">\n\t\t\t\t\t\t\t\t\t<div> Votre produit a bien ete modifie </div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</transition>\n\n\t\t\t\t\t\t<transition name=\"fade\">\n\t\t\t\t\t\t\t<div class=\"col-12 col-sm-12 text-center\" v-show=\"displayAlertDelete()\">\n\t\t\t\t\t\t\t\t<div class=\"col-6 col-sm-6 mx-auto border rounded py-2 my-2 bg-danger text-white\">\n\t\t\t\t\t\t\t\t\t<div> Votre produit a bien ete supprime </div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</transition>\n\n\t\t\t\t\t\t<div class=\"col-12 col-sm-12 text-left\">\n\t\t\t\t\t\t\t<h3> Mon Panier</h3>\n\t\t\t\t\t\t\t<div class=\"bg-dark pt-1\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div v-for=\"(cart,myIndex) in carts\" :key=\"cart.id\" :index=\"myIndex\" class=\"col-12 col-sm-12\">\n\t\t\t\t\t\t\t<div class=\"container-fluid\">\n\t\t\t\t\t\t\t\t<div class=\"row pt-3\">\n\t\t\t\t\t\t\t\t\t<div class=\"col-3 col-sm-3\">\n\t\t\t\t\t\t\t\t\t\t<img alt=\"product overview\" class=\"product_img_show_mini product_img_show_1 img-fluid  mt-3 w-100\" :src=\"getImgUrl(cart.img_overview)\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"col-7 col-sm-7 text-left\">\n\t\t\t\t\t\t\t\t\t\t<router-link :to=\"{ name: 'product_show', params: { id: cart.product_id } }\" style=\"text-decoration:none;\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"description_title\"> {{ cart.description_title }} </div>\n\t\t\t\t\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t\t\t\t\t<div class=\"mt-2\">\n\t\t\t\t\t\t\t\t\t\t\tQuantite :\n\t\t\t\t\t\t\t\t\t\t\t<select v-model.number=\"cart.product_quantity\">\n\t\t\t\t\t\t\t\t\t\t\t\t<option v-for=\"number in 15\" :key=\"number\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ number }}\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t<a @click=\"updateCart(myIndex)\" class=\"btn btn-info text-white ml-3\"> Modifier</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"mt-3\">\n\t\t\t\t\t\t\t\t\t\t\t<a @click=\"deleteCart(myIndex)\" class=\"btn btn-danger text-white w-50\"> Supprimer</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"col-2 col-sm-2\">\n\t\t\t\t\t\t\t\t\t\t<h4 class=\"text-danger\"> {{ formatPrice(cart.price) }} € </h4>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div v-show=\"notLastElement(cart)\" class=\"col-12 col-sm-12\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"bg-dark pt-1\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"col-3 col-sm-3\">\n\t\t\t\t<div class=\"px-3 py-3 bg-white text-center border rounded\">\n\t\t\t\t\t<h4 class=\"text-left\"> Total : <span class=\"text-danger\"> {{ formatPrice(totalCartPrice) }} €</span></h4>\n\t\t\t\t\t<a class=\"btn btn-info rounded text-white w-100\"> Passer la commande</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n\t</div>\n  \n</template>\n\n\n<script>\n\nimport axios from 'axios'\nimport userStore from '../store/userStore'\nimport navbarStore from '../store/navbarStore'\n\nexport default {\n\ndata () {\n\t    return {\n\t\t\tcarts: [],\n\t\t\tuserId: userStore.getters.getUserId,\n\t\t\ttotalCartPrice: 0,\n\t\t\talertUpdate:false,\n\t\t\talertDelete:false\n      }\n\t},\n\tmounted:function(){\n\t\t//console.log('userID = ' + this.userId)\n\t\tthis.getCart(this.userId)\n\t},\n  \tmethods: {\n\t\tdisplayAlertUpdate: function() {\n\t\t\treturn this.alertUpdate\n\t\t},\n\t\tdisplayAlertDelete: function(){\n\t\t\treturn this.alertDelete\n\t\t},\n\t\tgetCart(id) {\n\t\t\t//console.log('call get cart')\n\t\t\tvar url = process.env.VUE_APP_API_URL_CART_INDEX_CUSTOM + id   \n\t\t\t//console.log(url)\n\n\t\taxios.get(url)\n       \t\t.then((response) => {\n\t\t\t//console.log(response),\n\t\t\tthis.carts = response.data,\n\t\t\tthis.getTotalPriceCart()\n\t\t\t})\n\n\t\t},\n\t\tnotLastElement(cart){\n\t\t\tvar temp = this.carts[this.carts.length-1]\n\n\t\t\tif(cart == temp) \n\t\t\t\treturn false\n\t\t\telse \n\t\t\t\treturn true\n\t\t},\n\t\tupdateCart(indexTemp){\n\n\t\t\tvar cartTemp = this.carts[indexTemp]\n\t\t\tvar idCart = cartTemp.cart_id;\n\t\t\tvar url = process.env.VUE_APP_API_URL_CART_UPDATE + idCart\n\t\t\tcartTemp.cart_price = cartTemp.price * cartTemp.product_quantity\n\n\t\t\taxios({\n\t\t\t\tmethod: 'put',\n\t\t\t\turl : url,\n\t\t\t\tdata : {\n\t\t\t\t\t\t// variable elements\n\t\t\t\t\t\tuser_id: userStore.getters.getUserId, \n\t\t\t\t\t\tproduct_id : cartTemp.product_id,\n\t\t\t\t\t\tproduct_quantity : cartTemp.product_quantity,\n\t\t\t\t\t\tproduct_price: cartTemp.price\n\t\t\t\t\t\t}\n\t\t\t})\n       \t\t.then((response) => {\n\t\t\t//console.log(response)\n\t\t\tthis.getTotalPriceCart()\n\t\t\tthis.getCartNumber()\n\t\t\tthis.alertUpdate = true\n\t\t\tthis.alertDelete = false\n\t\t\t});\n\n\t\t},\n\t\tdeleteCart(indexTemp){\n\n\t\t\t// Variables\n\t\t\tvar cartTemp = this.carts[indexTemp]\n\t\t\tvar idCart = cartTemp.cart_id;\n\t\t\tvar url = process.env.VUE_APP_API_URL_CART_DELETE + idCart\n\n\t\t\taxios({\n\t\t\t\tmethod: 'delete',\n\t\t\t\turl : url,\n\t\t\t})\n       \t\t.then((response) => {\n\t\t\t\t//console.log(response)\n\t\t\t\tthis.carts.splice(indexTemp, 1)\n\t\t\t\tthis.getTotalPriceCart()\n\t\t\t\tthis.getCartNumber()\n\t\t\t\tthis.alertDelete = true\n\t\t\t\tthis.alertUpdate = false\n\t\t\t});\n\t\t},\n\t\tgetTotalPriceCart(){\n\n\t\t\tthis.totalCartPrice = 0\n\t\t\tfor(var i = 0; i<this.carts.length; i++)\n\t\t\t{\n\t\t\t\tthis.totalCartPrice += this.carts[i].cart_price\n\t\t\t}\n\t\t},\n\t\tgetCartNumber(){\n\t\t\t\n\t\t\tvar cartNumber=0;\n\t\t\tfor(var i = 0; i<this.carts.length; i++)\n\t\t\t{\n\t\t\t\tcartNumber += this.carts[i].product_quantity\n\t\t\t}\n\t\t\tnavbarStore.commit('setCartNumber', cartNumber)\n\t\t}\n\t}\n}\n</script>\n\n\n<style scoped>\n\n.product_img_show_mini {\t\n\theight:200px;\n}\n\na {\n\tcolor: black;\n}\n\na :hover{\n\tcolor: #5bc0de;\n}\n\n\n</style>\n\n"]}]}