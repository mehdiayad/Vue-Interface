{"remainingRequest":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/babel-loader/lib/index.js!/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Med/Desktop/Perso/WEB/vue-interface/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/src/components/Login.vue","mtime":1583829970340},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/cache-loader/dist/cjs.js","mtime":1583024834205},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/babel-loader/lib/index.js","mtime":1583024830408},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/cache-loader/dist/cjs.js","mtime":1583024834205},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlL3N0b3JlJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbWFpbDogbnVsbCwKICAgICAgcGFzc3dvcmQ6IG51bGwsCiAgICAgIGNvbm5lY3RlZDogZmFsc2UKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIGxvY2FsID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKTsKCiAgICBpZiAobG9jYWwgIT0gbnVsbCkgewogICAgICB0aGlzLmNvbm5lY3RlZCA9IGxvY2FsLnVzZXJjb25uZWN0ZWQ7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgbmFtZTogZnVuY3Rpb24gbmFtZShuZXdOYW1lKSB7CiAgICAgIGxvY2FsU3RvcmFnZS51c2VyY29ubmVjdGVkID0gbmV3TmFtZTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgY29uc29sZS5sb2coJ0NhbGwgbG9naW4nKTsKICAgICAgdmFyIHVybDEgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9VUkxfQVVUSEVOVElGSUNBVElPTl9BUEk7CiAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICB1cmw6IHVybDEsCiAgICAgICAgZGF0YTogewogICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZAogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgc3RvcmUuY29tbWl0KCdzZXR1c2VyaWQnLCByZXNwb25zZS5kYXRhLmlkKTsKICAgICAgICBzdG9yZS5jb21taXQoJ3NldHVzZXJlbWFpbCcsIHJlc3BvbnNlLmRhdGEuZW1haWwpOwogICAgICAgIHN0b3JlLmNvbW1pdCgnc2V0dXNlcmNvbm5lY3RlZCcsIHJlc3BvbnNlLmRhdGEuY29ubmVjdGVkKTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29ubmVjdGVkKSB7CiAgICAgICAgICAvLyBsb2NhbCBzdG9yYWdlCiAgICAgICAgICAvL2xvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyaWQiLHN0b3JlLmdldHRlcnMudXNlcmlkKQogICAgICAgICAgLy9sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlcmVtYWlsIixzdG9yZS5nZXR0ZXJzLnVzZXJlbWFpbCkKICAgICAgICAgIC8vbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJjb25uZWN0ZWQiLHN0b3JlLmdldHRlcnMudXNlcmNvbm5lY3RlZCkKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyIiwgSlNPTi5zdHJpbmdpZnkoc3RvcmUuZ2V0dGVycy5hbGwpKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuJC5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdob21lJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,KAAA,MAAA,gBAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,IADA;AAEA,MAAA,QAAA,EAAA,IAFA;AAGA,MAAA,SAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,OAAA,EAAA,mBAAA;AACA,QAAA,KAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA;;AAEA,QAAA,KAAA,IAAA,IAAA,EAAA;AACA,WAAA,SAAA,GAAA,KAAA,CAAA,aAAA;AACA;AACA,GAdA;AAeA,EAAA,KAAA,EAAA;AACA,IAAA,IADA,gBACA,OADA,EACA;AACA,MAAA,YAAA,CAAA,aAAA,GAAA,OAAA;AACA;AAHA,GAfA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,KAAA,EAAA,iBAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,YAAA;AACA,UAAA,IAAA,GAAA,OAAA,CAAA,GAAA,CAAA,oCAAA;AAEA,MAAA,KAAA,CAAA;AACA,QAAA,MAAA,EAAA,MADA;AAEA,QAAA,GAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAAA,UAAA,KAAA,EAAA,KAAA,KAAA;AAAA,UAAA,QAAA,EAAA,KAAA;AAAA;AAHA,OAAA,CAAA,CAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AAEA,QAAA,KAAA,CAAA,MAAA,CAAA,WAAA,EAAA,QAAA,CAAA,IAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,cAAA,EAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,kBAAA,EAAA,QAAA,CAAA,IAAA,CAAA,SAAA;;AAEA,YAAA,QAAA,CAAA,IAAA,CAAA,SAAA,EAAA;AACA;AACA;AACA;AACA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AACA;;AAEA,aAAA,CAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAAA;AAGA,OAvBA;AAwBA;AA7BA;AApBA,CAAA","sourcesContent":["<template>\n\n  <div class=\"container-fluid\">\n    <div class=\"row pt-5\">\n      <div class=\"col-4 col-sm-4 mx-auto mt-5\">\n        <div class=\"card mx-auto text-left\">\n          <div class=\"card-header bg-info text-white\"> Connexion {{connected}} </div>\n          <div class=\"card-body\">\n            <div class=\"form-group\">\n              <div> Email </div>\n              <input v-model=\"email\" type=\"email\" class=\"form-control\"/>\n            </div>\n            <div class=\"form-group\">\n              <div> Mot de passe </div>\n              <input v-model=\"password\" type=\"password\" class=\"form-control\"/>\n            </div>\n            <div class=\"text-center\">\n              <a class=\"float-right btn btn-info text-white\" v-on:click=\"login()\">Valider</a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</template>\n\n<script>\n\nimport axios from 'axios'\nimport store from '../store/store'\n\n  export default {\n  data() {\n    return {\n      email: null,\n      password: null,\n      connected: false\n    }\n  },\n  mounted: function() {\n      var local = JSON.parse(localStorage.getItem('user'))\n\n      if(local != null){\n        this.connected = local.userconnected\n      }\n  },\n  watch: {\n    name(newName) {\n      localStorage.userconnected = newName;\n    }\n  },\n  methods:{\n    login:  function(){\n      console.log('Call login')\n      var url1 = process.env.VUE_APP_API_URL_AUTHENTIFICATION_API;\n\n      axios({\n        method: 'post',\n        url : url1,\n        data : {email : this.email, password: this.password}\n      })\n      .then(function (response) {\n            console.log(response)\n\n            store.commit('setuserid',response.data.id)\n            store.commit('setuseremail',response.data.email)\n            store.commit('setuserconnected',response.data.connected)\n\n            if(response.data.connected){\n              // local storage\n              //localStorage.setItem(\"userid\",store.getters.userid)\n              //localStorage.setItem(\"useremail\",store.getters.useremail)\n              //localStorage.setItem(\"userconnected\",store.getters.userconnected)\n              localStorage.setItem(\"user\", JSON.stringify(store.getters.all))\n            }\n\n             this.$.push({ name: 'home' })\n\n\n        });\n    }\n  }\n}\n</script>\n\n\n<style scoped>\n</style>\n\n"],"sourceRoot":"src/components"}]}