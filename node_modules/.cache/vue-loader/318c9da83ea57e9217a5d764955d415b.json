{"remainingRequest":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Med/Desktop/Perso/WEB/vue-interface/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/src/components/Login.vue","mtime":1583830314142},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/cache-loader/dist/cjs.js","mtime":1583024834205},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/babel-loader/lib/index.js","mtime":1583024830408},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/cache-loader/dist/cjs.js","mtime":1583024834205},{"path":"/Users/Med/Desktop/Perso/WEB/vue-interface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCmltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZS9zdG9yZScKCiAgZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbWFpbDogbnVsbCwKICAgICAgcGFzc3dvcmQ6IG51bGwsCiAgICAgIGNvbm5lY3RlZDogZmFsc2UKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgbG9jYWwgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykpCgogICAgICBpZihsb2NhbCAhPSBudWxsKXsKICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGxvY2FsLnVzZXJjb25uZWN0ZWQKICAgICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG5hbWUobmV3TmFtZSkgewogICAgICBsb2NhbFN0b3JhZ2UudXNlcmNvbm5lY3RlZCA9IG5ld05hbWU7CiAgICB9CiAgfSwKICBtZXRob2RzOnsKICAgIGxvZ2luOiAgZnVuY3Rpb24oKXsKICAgICAgY29uc29sZS5sb2coJ0NhbGwgbG9naW4nKQogICAgICB2YXIgdXJsMSA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTF9BVVRIRU5USUZJQ0FUSU9OX0FQSTsKCiAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICB1cmwgOiB1cmwxLAogICAgICAgIGRhdGEgOiB7ZW1haWwgOiB0aGlzLmVtYWlsLCBwYXNzd29yZDogdGhpcy5wYXNzd29yZH0KICAgICAgfSkKICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQoKICAgICAgICAgICAgc3RvcmUuY29tbWl0KCdzZXR1c2VyaWQnLHJlc3BvbnNlLmRhdGEuaWQpCiAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgnc2V0dXNlcmVtYWlsJyxyZXNwb25zZS5kYXRhLmVtYWlsKQogICAgICAgICAgICBzdG9yZS5jb21taXQoJ3NldHVzZXJjb25uZWN0ZWQnLHJlc3BvbnNlLmRhdGEuY29ubmVjdGVkKQoKICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5jb25uZWN0ZWQpewogICAgICAgICAgICAgIC8vIGxvY2FsIHN0b3JhZ2UKICAgICAgICAgICAgICAvL2xvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyaWQiLHN0b3JlLmdldHRlcnMudXNlcmlkKQogICAgICAgICAgICAgIC8vbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJlbWFpbCIsc3RvcmUuZ2V0dGVycy51c2VyZW1haWwpCiAgICAgICAgICAgICAgLy9sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlcmNvbm5lY3RlZCIsc3RvcmUuZ2V0dGVycy51c2VyY29ubmVjdGVkKQogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyIiwgSlNPTi5zdHJpbmdpZnkoc3RvcmUuZ2V0dGVycy5hbGwpKQogICAgICAgICAgICB9CgogICAgICAgICAgICAgLy90aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdob21lJyB9KSBub3Qgd29ya2luZwoKCiAgICAgICAgfSk7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n  <div class=\"container-fluid\">\n    <div class=\"row pt-5\">\n      <div class=\"col-4 col-sm-4 mx-auto mt-5\">\n        <div class=\"card mx-auto text-left\">\n          <div class=\"card-header bg-info text-white\"> Connexion {{connected}} </div>\n          <div class=\"card-body\">\n            <div class=\"form-group\">\n              <div> Email </div>\n              <input v-model=\"email\" type=\"email\" class=\"form-control\"/>\n            </div>\n            <div class=\"form-group\">\n              <div> Mot de passe </div>\n              <input v-model=\"password\" type=\"password\" class=\"form-control\"/>\n            </div>\n            <div class=\"text-center\">\n              <a class=\"float-right btn btn-info text-white\" v-on:click=\"login()\">Valider</a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</template>\n\n<script>\n\nimport axios from 'axios'\nimport store from '../store/store'\n\n  export default {\n  data() {\n    return {\n      email: null,\n      password: null,\n      connected: false\n    }\n  },\n  mounted: function() {\n      var local = JSON.parse(localStorage.getItem('user'))\n\n      if(local != null){\n        this.connected = local.userconnected\n      }\n  },\n  watch: {\n    name(newName) {\n      localStorage.userconnected = newName;\n    }\n  },\n  methods:{\n    login:  function(){\n      console.log('Call login')\n      var url1 = process.env.VUE_APP_API_URL_AUTHENTIFICATION_API;\n\n      axios({\n        method: 'post',\n        url : url1,\n        data : {email : this.email, password: this.password}\n      })\n      .then(function (response) {\n            console.log(response)\n\n            store.commit('setuserid',response.data.id)\n            store.commit('setuseremail',response.data.email)\n            store.commit('setuserconnected',response.data.connected)\n\n            if(response.data.connected){\n              // local storage\n              //localStorage.setItem(\"userid\",store.getters.userid)\n              //localStorage.setItem(\"useremail\",store.getters.useremail)\n              //localStorage.setItem(\"userconnected\",store.getters.userconnected)\n              localStorage.setItem(\"user\", JSON.stringify(store.getters.all))\n            }\n\n             //this.$router.push({ name: 'home' }) not working\n\n\n        });\n    }\n  }\n}\n</script>\n\n\n<style scoped>\n</style>\n\n"]}]}